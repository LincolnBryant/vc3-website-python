{%extends "loginbase.html"%}

{%block title%}Create a new project{%endblock%}

{%block body%}
{%include 'messages.html'%}

<div class="col-md-8 col-sm-12">
  <section id="new_project">
    <div class="container new-project">

      <form role="form" id="new-project-form" action="{{url_for('create_project')}}" method="POST">

        <h2>Create a New Project</h2>
        <h4>A project connects your allocations to your team members</h4>
        <h4><label><span id="asterik">*</span> = indicates required</label></h4>

        <fieldset>
          <label for="name">Project Name <span id="asterik">*</span></label>
            <input
              placeholder="Your Project name"
              name="name"
              type="text"
              tabindex="1"
              required
              autofocus
              value="{{request.name}}">
        </fieldset>
        <fieldset>
          <label for="members">Project Members</label>
            <!-- owner: {{ owner }} -->
          <select class="form-control" multiple name="members" tabindex="2" id="form-resource-list" data-live-search="true" data-actions-box="true" data-header="Select Users">
            <!-- <option value="" selected>Add User to Project</option> -->
            {% for user in users %}
              {% if (user.name != owner) %}
            <option data-tokens="{{user.displayname}}" value="{{user.name}}">{{ user.first }} {{user.last}}</option>
              {% endif %}
            {% endfor %}
          </select>
        </fieldset>
        <fieldset>
          <label for="allocation">Select Allocation:</label>
          <select class="form-control selectpicker" multiple id="form-resource-list" name="allocation" tabindex="3" data-live-search="true" data-actions-box="true" data-header="Select Allocations below to add to project">
            <!-- <option value="" selected>Add Allocation to Project</option> -->
          <!-- Populate List of Allocations that has been defined by User -->
          {% for allocation in allocations %}
            {% if allocation.owner == owner and session['name'] == owner %}
            <option data-tokens="{{allocation.displayname}}" value="{{allocation.name}}">{{ allocation.displayname }}</option>
            {% endif %}
          {% endfor %}
          </select>
        </fieldset>
        <fieldset>
          <label for="description">Description</label>
          <textarea
            placeholder="Brief 144 Character Description..."
            name="description"
            id="form-textarea"
            tabindex="4"
            autofocus
            maxlength="144"
            value="{{request.description}}"
            >{{description}}</textarea>
          <span class="help-block exceeded"></span>
        </fieldset>
        <fieldset>
          <button type="submit" tabindex="5" id="create-project" data-submit="...Sending">Create Project</button>
        </fieldset>
        <fieldset>
          <a href="{{url_for('list_projects')}}" class="btn btn-primary btn-sm" tabindex="6" title="Cancel">Cancel</a>
        </fieldset>

      </form>
    </div> <!-- project container -->
  </section>
</div>
{%endblock%}
